<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🎀 كشف الجنس - نسخة خفيفة</title>
  <meta name="theme-color" content="#ff4fa3">
  <style>
    :root{
      --pink:#ff4fa3;
      --pink-2:#ff7fc4;
      --bg:#fff7fb;
      --text:#222;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background: var(--bg);
    }
    .wrap{min-height:100%; display:flex; align-items:center; justify-content:center; padding:20px}
    .card{
      width:min(720px,96vw); background:#fff; border-radius:18px; padding:22px;
      box-shadow:0 6px 18px rgba(0,0,0,.06);
    }
    h1{margin:8px 0 10px; font-size:clamp(22px, 5vw, 32px)}
    .lead{margin:0 0 10px; color:#555}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      appearance:none; border:none; cursor:pointer;
      background:linear-gradient(135deg,var(--pink),var(--pink-2));
      color:#fff; padding:14px 18px; border-radius:12px; font-weight:700;
      font-size:18px;
      will-change: transform;
      transition: transform .06s ease;
    }
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:#f2f3f6; color:#333}
    .hint{font-size:12px; color:#777; margin-top:8px}
    .hidden{display:none!important}
    #count{font-size:clamp(48px, 12vw, 86px); color:var(--pink); font-weight:900; margin:10px 0}
    #msg{font-size:clamp(26px, 7vw, 42px); color:#b31374; font-weight:800; margin-top:8px}
    /* Confetti (very light) */
    .confetti{position:fixed; inset:0; pointer-events:none; overflow:hidden}
    .piece{position:absolute; top:-10px; width:8px; height:10px; opacity:.9; background:#ff7fc4;
      animation: fall linear forwards; will-change: transform;
    }
    @keyframes fall{to{transform:translate3d(0,100vh,0) rotate(540deg)}}
    /* Reduce motion for users/settings */
    @media (prefers-reduced-motion: reduce){
      .piece{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="step1">
        <h1>السدحان جايهم فرد جديد.. تبي تعرف هو وش؟</h1>
        <div class="row">
          <button class="btn" id="yes1">إيه</button>
          <button class="btn ghost" id="liteToggle">وضع خفيف 🚀</button>
        </div>
        <div class="hint">نسخة خفيفة تناسب الجوالات الضعيفة. فعّل/أوقف "وضع خفيف" وقت ما تبغى.</div>
      </div>

      <div id="step2" class="hidden">
        <h1>متأكد؟؟؟</h1>
        <button class="btn" id="yes2">إيه</button>
      </div>

      <div id="step3" class="hidden">
        <div id="count">5</div>
      </div>

      <div id="step4" class="hidden">
        <div id="msg">🎀 مبروك.. بنت محمد السدحان جابه ولمّوا البخور 🎀</div>
        <div class="row" style="margin-top:10px">
          <button class="btn" id="again">إعادة</button>
        </div>
      </div>
    </div>
  </div>

  <div class="confetti" id="confetti"></div>

<script>
  const qs = sel => document.querySelector(sel);
  const step1 = qs('#step1'), step2 = qs('#step2'), step3 = qs('#step3'), step4 = qs('#step4');
  const yes1 = qs('#yes1'), yes2 = qs('#yes2'), again = qs('#again');
  const count = qs('#count'), confetti = qs('#confetti'), liteBtn = qs('#liteToggle');

  let LITE = false; // confetti off / lighter UI

  liteBtn.addEventListener('click', () =>{
    LITE = !LITE;
    liteBtn.textContent = LITE ? 'وضع عادي' : 'وضع خفيف 🚀';
  });

  yes1.addEventListener('click', ()=>{ step1.classList.add('hidden'); step2.classList.remove('hidden'); });
  yes2.addEventListener('click', ()=>{
    step2.classList.add('hidden'); step3.classList.remove('hidden');
    startCountdown(5);
  });
  again?.addEventListener('click', ()=>{ step4.classList.add('hidden'); step1.classList.remove('hidden'); confetti.innerHTML=''; });

  function startCountdown(n){
    count.textContent = n;
    const t = setInterval(()=>{
      n--; count.textContent = n;
      if(n<=0){ clearInterval(t); step3.classList.add('hidden'); step4.classList.remove('hidden'); if(!LITE) makeConfetti(60); }
    }, 850);
  }

  function makeConfetti(num){
    const colors = ['#ff7fc4','#ffd1ec','#ff4fa3','#ffc1e1'];
    for(let i=0;i<num;i++){
      const el = document.createElement('span');
      el.className = 'piece';
      const size = 6 + Math.random()*6;
      el.style.width = size+'px';
      el.style.height = (size*1.15)+'px';
      el.style.left = Math.floor(Math.random()*100)+'vw';
      el.style.background = colors[Math.random()*colors.length|0];
      el.style.animationDuration = (2.6 + Math.random()*2.2)+'s';
      el.style.animationDelay = (Math.random()*0.6)+'s';
      confetti.appendChild(el);
    }
  }
</script>
</body>
</html>
